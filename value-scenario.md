# 画像の色平均化ツール - 構造化シナリオ

## ペルソナ

田中健太（27歳、個人開発者、エンジニア3年目）

状況： 週末の個人プロジェクトで、レトロゲーム風のドット絵RPGを制作中。参考ゲームのスクリーンショットから「あの雰囲気の色」を抽出したい。

人物像：直感的な操作を求めているが、自分の直感を信頼していないため、理論に基づく決定を好む。

## バリューシナリオ

**どのようにすれば、ピクセル単位のノイズがある画像から「人間が遠目から見た平された色」が抽出できるだろうか**

田中健太は、週末の個人プロジェクトで参考画像から配色を抽出したいと考えている。従来のスポイトツールでは、ピクセル単位のノイズやアンチエイリアシングの影響で、「この辺りの雰囲気の色」を一発で取得できず、何度もクリックして平均を取る必要があった。

新しいツールを使うことで、健太は画像の「この辺り」を大まかに指定するだけで、人間が遠目から見た時に感じる「平された代表色」を色空間の構造を理解しながら探索できるようになった。色相、明度、彩度の関係性が視覚的に把握でき、元画像のどの部分がその色に対応しているかも確認できる。

結果として、健太は30分ほどで統一感のある10色のカラーパレットを作成し、自分のプロジェクトに自信を持って適用できるようになった。

---

## アクティビティシナリオ

### 1. 画像の準備と領域指定
健太は参考にしたいレトロゲームのスクリーンショットを用意し、ツールに読み込ませる。画面上に画像が表示され、「このキャラクターの服の色」を取得するため、そのキャラクター付近を大まかに指定する。正確なピクセル選択は不要で、「この辺り」という感覚で領域を決める。

### 2. 色の分布を理解する
指定した領域に含まれる色の分布が、色相、明度、彩度の観点から可視化される。健太はどの色相が多く含まれているか、その色相の中でどのような明度・彩度のバリエーションがあるかを一目で把握する。

### 3. 色を探索する
健太は「#6482faの色相を見たい」と思い、色相の分布からその色相の領域に注目する。すると、その色相に対応する明度・彩度の詳細が表示される。同時に、元画像のどの部分がその色に該当するかが視覚的に示され、「ああ、この部分の色なんだな」と理解する。

さらに明度と彩度の分布を見て、「もう少し明るい青が良い」と感じた健太は、目的の領域に絞り込む。その結果、元画像で該当するピクセルがハイライトされ、「この辺りのピクセルの色だな」と確認できる。

### 4. 色を決定して活用する
健太は探索の結果、「これだ」と思う色を見つけ、その色のコードを取得する。すぐにコードエディタに貼り付けて、自分のゲームに適用する。

### 5. 繰り返しと完成
他にも「背景の空の色」「敵キャラの赤」など、複数の領域から色を次々と抽出する。抽出した色を一時的に保存しておき、プロジェクト全体の配色設計に活用する。30分ほどで10色のカラーパレットが完成し、統一感のあるビジュアルを実現できた。

---

## インタラクションシナリオ

### タスク1: 画像を読み込み、領域を指定する

ユーザーの状態： 健太は参考画像を手元に用意している

きっかけ： 配色を抽出したいと思う

行動：
1. 健太は画像ファイルをツールに渡す
2. 画面に画像が表示されるのを確認する
3. 「このキャラクターの服」(興味のある部分)を長方形で大まかに指定する
4. 元画像がミニマップになり、指定した領域がメインとして拡大されツールが動き出す。

結果： 指定領域の色が分析可能な状態になる

---

### タスク2: 色相の分布を確認する

ユーザーの状態： 領域指定が完了し、色の分析結果が表示され始める

きっかけ： どんな色が含まれているか知りたい

行動：
1. 健太は色相の分布表示を見る
2. 「青系が多いな」「赤も少し入っているな」と分布を理解する
3. 明度・彩度の詳細表示エリアが初期状態（空白またはプレースホルダー）であることに気づく

結果： 領域内の色相分布を把握する

---

### タスク3: 特定の色相を選択し、詳細を見る

ユーザーの状態： 色相分布を把握し、興味のある色相がある

きっかけ： 「青系の色をもっと詳しく見たい」と思う

行動：
1. 健太は色相分布から青の領域を選択する
2. 選択した位置から明度・彩度表示エリアへ接続線がアニメーションで伸びるのを見る（0.2-0.3秒程度）
3. 線が到達すると同時に、選択した色相の明度・彩度平面が展開表示される
4. 平面のタイトルに「H = 210° の LC平面」と表示され、背景が青系に色付けされているのを確認する
5. 元画像上で、該当する色相のピクセルがハイライト表示されるのを見る

結果： 選択した色相に対応する明度・彩度の分布と、元画像での位置を理解する

---

### タスク4: 明度・彩度を絞り込む

**ユーザーの状態：** 特定色相の明度・彩度分布が表示されている

**きっかけ：** 「もう少し明るい青が良い」と思う

**行動：**
1. 健太は明度・彩度平面上で、明度が高めの領域を選択する
2. 選択した点がハイライト表示される
3. 元画像上で、該当する色（特定の色相・明度・彩度）のピクセルだけがハイライトされる
4. 色の一覧表示で、該当する色のレコードがハイライトされる

**結果：** 目的の色に絞り込まれ、元画像のどの部分がその色かを確認できる

---

### タスク5: 複数の色相を同時に確認する

**ユーザーの状態：** 1つの色相を選択済み

**きっかけ：** 「赤系も一緒に見たい」と思う

**行動：**
1. 健太は色相分布から赤の領域も選択する
2. 選択した位置から、別の色（オレンジ系）の接続線が伸びる
3. 明度・彩度平面上に、青系（1つ目）と赤系（2つ目）のデータが色分けされてオーバーレイ表示される
4. 平面右上のレジェンドに「H=210°（青線）」「H=30°（オレンジ線）」と表示される
5. 元画像上で、青系と赤系のピクセルが異なる方法でハイライトされる

**結果：** 複数の色相を同時に比較検討できる

---

### タスク6: 色を決定してコピーする

**ユーザーの状態：** 目的の色を見つけた

**きっかけ：** 「この色をプロジェクトで使いたい」と思う

**行動：**
1. 健太は色の一覧表示から、目的の色のレコードを選択する
2. 色のコード（Hex）が表示されているのを確認する
3. コードをコピーする操作を行う
4. コードエディタに貼り付ける

**結果：** 抽出した色をプロジェクトで使用できる

---

### タスク7: 別の領域から色を抽出する

**ユーザーの状態：** 1つの領域から色を抽出済み

**きっかけ：** 「背景の色も欲しい」と思う

**行動：**
1. 健太は画像の別の部分（背景）を指定する
2. タスク2〜6を繰り返す
3. 抽出した色を保存しておく

**結果：** 複数の領域から色を抽出し、カラーパレットが充実する

---

## 構造を伝えるUI要素（インタラクションシナリオに反映済み）

- **初期状態での従属性表現**: 明度・彩度平面は初期状態では非表示（空白/プレースホルダー）
- **接続線アニメーション**: 色相選択時、選択位置から明度・彩度平面へ接続線が伸びる
- **タイトル表示**: 「H = 210° の LC平面」と現在表示中の色相を明示
- **背景色**: 明度・彩度平面の背景を選択中の色相で色付け
- **上下配置**: 色相分布を上部、明度・彩度平面を下部に配置し、「上から下へ情報が流れる」レイアウト
- **複数選択時の色分け**: 接続線とデータポイントを選択順序で色分け（青、オレンジ、緑など）
- **レジェンド表示**: 複数選択時、各選択に対応する色相と接続線の色を表示

---

いかがでしょうか？構造化シナリオ法の各レベルで、実装の詳細に踏み込まず、ユーザー体験に焦点を当てて記述しました。